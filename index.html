<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de SeÃ±ales de TrÃ¡nsito</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body>

    <header>
        <div class="container">
            <h1>ğŸš¦ SeÃ±ales de TrÃ¡nsito</h1>
            <nav>
                <button id="btn-theme" class="nav-btn" title="Cambiar Tema">ğŸŒ™</button>
                <button id="btn-study" class="nav-btn">ğŸ“– Estudiar / Editar</button>
                <button id="btn-quiz" class="nav-btn active">ğŸ“ Examen</button>
                <button id="btn-export" class="nav-btn export-btn hidden">ğŸ’¾ Descargar Datos</button>
            </nav>
        </div>
    </header>

    <main class="container">
        <section id="study-section" class="hidden">
            <div class="info-banner">
                <p>ğŸ’¡ HacÃ© clic en una seÃ±al para editar su nombre y categorÃ­a. Los nombres que ingreses se van a usar
                    en el examen.</p>
                <div class="stats">
                    <span>Identificadas: <strong id="identified-count">0</strong>/226</span>
                </div>
            </div>
            <div class="signals-grid" id="signals-grid">
            </div>
        </section>

        <section id="quiz-section" class="active">
            <div id="quiz-start" class="quiz-container">
                <h2>ConfiguraciÃ³n del Examen</h2>

                <div class="config-section">
                    <label>Modo de Juego:</label>
                    <div class="mode-selector">
                        <button class="mode-btn active" data-mode="standard">EstÃ¡ndar (Solo Nombres)</button>
                        <button class="mode-btn" data-mode="expert">Experto (Nombre + CategorÃ­a)</button>
                    </div>
                </div>

                <div class="config-section">
                    <label>Cantidad de Preguntas:</label>
                    <select id="config-count">
                        <option value="5">5 Preguntas</option>
                        <option value="10" selected>10 Preguntas</option>
                        <option value="20">20 Preguntas</option>
                        <option value="all">Todas</option>
                    </select>
                </div>

                <div class="config-section">
                    <label>Opciones:</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="config-timer" checked>
                        <span class="slider"></span>
                        <span class="toggle-label">LÃ­mite de Tiempo (10s)</span>
                    </label>
                </div>

                <div class="config-section">
                    <label>CategorÃ­as:</label>
                    <div class="category-filters" id="category-filters">
                        <!-- Checkboxes generated by JS -->
                    </div>
                </div>

                <button id="start-quiz-btn" class="primary-btn">Comenzar Examen</button>
            </div>

            <div id="quiz-game" class="quiz-container hidden">
                <div class="quiz-header">
                    <div class="progress-wrap">
                        <div class="progress-container">
                            <div id="quiz-progress-bar" class="progress-bar"></div>
                        </div>
                        <div id="timer-bar" class="timer-bar hidden"></div>
                    </div>
                    <div class="score-streak">
                        <span id="score">Puntos: 0</span>
                        <span id="streak">Racha: ğŸ”¥ 0</span>
                    </div>
                </div>
                <div class="quiz-card">
                    <img id="quiz-image" src="" alt="SeÃ±al de trÃ¡nsito">
                    <div class="options-grid" id="quiz-options">
                    </div>
                </div>
                <div id="feedback" class="feedback hidden"></div>
                <button id="next-question" class="secondary-btn hidden">Siguiente SeÃ±al</button>
            </div>

            <div id="quiz-results" class="quiz-container hidden">
                <h2>Â¡Examen Completado! ğŸ‰</h2>
                <div class="results-summary">
                    <div class="final-score">
                        <span id="final-score-val">0</span>
                        <span class="label">Puntos</span>
                    </div>
                    <div class="stars-container" id="stars-display">
                        <!-- â­â­â­ -->
                    </div>
                    <p id="results-message">Â¡Buen trabajo!</p>
                    <div id="retry-container" class="hidden">
                        <p id="retry-message">Â¡Casi perfecto! Te faltaron 2 para el 100%.</p>
                        <button id="retry-mistakes-btn" class="primary-btn"
                            style="margin-top: 1rem; background-color: var(--primary); border: 2px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">ğŸ”¥
                            Â¡Reintentar!</button>
                    </div>
                </div>
                <div class="results-actions">
                    <button id="restart-quiz-btn" class="primary-btn">Jugar de Nuevo</button>
                    <button id="back-study-btn" class="secondary-btn">Volver a Estudiar</button>
                </div>
            </div>
        </section>
    </main>

    <div id="edit-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Editar SeÃ±al</h2>
            <div class="modal-body">
                <img id="modal-img" src="" alt="SeÃ±al a editar">
                <div class="form-group">
                    <label for="signal-name">Nombre de la SeÃ±al:</label>
                    <input type="text" id="signal-name" placeholder="Ej: Pare, Ceda el Paso...">
                </div>
                <div class="form-group">
                    <label for="signal-category">CategorÃ­a:</label>
                    <select id="signal-category">
                        <option value="Reglamentaria">Reglamentaria (Roja/Circular)</option>
                        <option value="Preventiva">Preventiva (Amarilla/Rombo)</option>
                        <option value="Informativa">Informativa (Azul/Verde)</option>
                        <option value="Transitoria">Transitoria (Naranja)</option>
                        <option value="DemarcaciÃ³n Horizontal">DemarcaciÃ³n Horizontal</option>
                        <option value="DemarcaciÃ³n Luminosa">DemarcaciÃ³n Luminosa</option>
                    </select>
                </div>
                <button id="save-signal" class="primary-btn">Guardar Cambios</button>
            </div>
        </div>
    </div>

    <footer>
        <p>Estudio de SeÃ±ales de TrÃ¡nsito Argentinas</p>
    </footer>

    <script src="signals.js"></script>
    <script src="app.js"></script>
</body>

</html>